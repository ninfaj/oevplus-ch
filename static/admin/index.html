<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Content Manager</title>
</head>

<body>
  <!-- Include the script that builds the page and powers Netlify CMS -->

  <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>

  <script>

    CMS.registerPreviewStyle("/scss/app.min.css");

    // FAQ
    CMS.registerEditorComponent({
      id: "button",
      label: "Button",
      pattern: /{{< button link="(.*)" label="(.*)" icon="(.*)" >}}/,
      fields: [{
        name: "link",
        label: "link",
        widget: "string"
      },{
        name: "label",
        label: "label",
        widget: "string"
      },{
        name: "icon",
        label: "icon",
        widget: "string",
        default: "fa-angle-down"
      }],
      toBlock: function(obj) {
        return `{{< button link="${obj.link}" label="${obj.label}" icon="${obj.icon}" >}}`;
      },
      fromBlock: function (match) {
        return {
          link: match[1],
          label: match[2],
          icon: match[3],
        };
      },
      toPreview: createButton
    });

    function createButton(obj) {
      return `<a href="${obj.link}" class="button is-primary">
          ${obj.label}
          <span class="icon">
            <i class="fas ${obj.icon}" aria-hidden="true"></i>
          </span>
        </a>`;
    }

  </script>

</body>

</html>